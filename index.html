<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=320, initial-scale=1">
    <meta charset="utf-8">
    <script src="jQuery.js" type="text/javascript"></script>
    <style>
      #prt {
        display: none;
      }
      #tex {
        display: none;
      }
      #mailer {
         display: none;
      }
      #m1 {
          width: 300px;
      }
      #noimg {
        display: none;
      }
    </style>
    <script>
      $(document).ready(function() {
        $("#dom1").change(function() {
          $("#dop1").remove();
            $("#dop2").remove();
          if($(this).val() == "полное") {
            $("#prt").hide();
            $("#novop").remove();
            $("#prom1").remove();
            $("#prom2").remove();
            $("#dom2").after("<br/><select id='dop1'><option>есть предроспложиность рецессивному признаку</option><option>нет предроспложиности к рецессивному признаку</option></select>");
            $("#dom3").after("<br/><select id='dop2'><option>есть предроспложиность к рецессивному признаку</option><option>нет предроспложиности к рецессивному признаку</option></select>");
            if($("#dom2").val() == "рециссивный признак") {
              $("#dop1").hide();
            }
            if($("#dom3").val() == "рециссивный признак") {
              $("#dop2").hide();
            }
          } else {
            $("#prt").show();
            $("#dom2").append("<option id='prom1'>промежуточный признак</option>");
            $("#dom3").append("<option id='prom2'>промежуточный признак</option>");
            $("#vop").append("<option id='novop'>Какова вероятность, что у них родится ребёнок с проявлением промежуточного признака?</option>")
          }
        });
        $("#dom2").change(function() {
          if($(this).val() == "доминантный признак") {
            $("#dop1").show();
          } else {
            $("#dop1").hide();
          }
        });
        $("#dom3").change(function() {
          if($(this).val() == "доминантный признак") {
            $("#dop2").show();
          } else {
            $("#dop2").hide();
          }
        });
        $("#info").click(function() {
          $("#tex").hide();
        });
        $("#but").click(function() {
          $("#tex").show();
          if($("#dom2").val() == "доминантный признак") {
              var n1 = $("#pr1").val();
          } else if($("#dom2").val() == "рецессивный признак") {
              var n1 = $("#pr2").val();
          } else if($("#dom2").val() == "промежуточный признак") {
              var n1 = $("#pr3").val();
          }
          $("#n1").text(n1);
          $("#n2").text($("#dom2").val());
          if($("#dop1").val() == "есть предрасположенность к рецессивному признаку") {
              $("#n5").text(", также её отец " + $("#pr2").val());
          } else {
              $("#n5").text("");
          }
          if($("#dom3").val() == "доминантный признак") {
              var n2 = $("#pr1").val();
          } else if($("#dom3").val() == "рецессивный признак") {
              var n2 = $("#pr2").val();
          } else if($("#dom3").val() == "промежуточный признак") {
              var n2 = $("#pr3").val();
          }
          $("#n4").text($("#dom3").val());
          $("#n3").text(n2);
          if($("#dop2").val() == "есть предрасположенность к рецессивному признаку") {
              $("#n6").text(", также его мать " + $("#pr2").val());
          } else {
              $("#n6").text("");
          }
          
          $("#n7").text($("#vop").val());
        });
        $("#go").click(function(){
          $("#noimg").show();
            var t = $("#tex").text();
            var e = $("#m1").val();
          if(e != "") {
            e = e + ";";
          while(e != "") {
            var email = e.substring(0, e.indexOf(";"));
alert(email);
            $("#t").val(t);
            $("#e").val(email);
setTimeout(function (){
            document.getElementById("sub").click();
}, 5000);
            e = e.substring(e.indexOf(";") + 1, e.length);
          }
          }
          $("#noimg").hide();
          $("#info").show();
            $("#but").show();
            $("#mail").show();
            $("#mailer").hide();
        });
        $("#mail").click(function(){
            $("#info").hide();
            $("#but").hide();
            $("#tex").hide();
            $("#mail").hide();
            $("#mailer").show();
        });
      });
    </script>
  </head>
  <body>
    <div id="info">
    Доминирование: <select id="dom1">
    <option>полное</option><option>неполное</option>
    </select><br/><br/>
    Доминантный признак: <input type="text" id="pr1"/><br/><br/>
    Рецессивный признак: <input type="text" id="pr2"/><br/><br/>
    <span id="prt">Промежуточный признак: <input type="text" id="pr3"/><br/><br/></span>
    Признак 1-го родителя: <select id="dom2">
    <option>доминантный признак</option><option>рецессивный признак</option>
    </select>
    <select id="dop1">
      <option id="d1">есть предрасположенность к рецессивному признаку</option><option id="d2">нет предрасположенности к рецессивному признаку</option>
    </select><br/><br/>
    Признак 2-го родителя: <select id="dom3">
    <option>доминантный признак</option><option>рециссивный признак</option>
    </select>
    <select id="dop2">
    <option>есть предрасположенность к рецессивному признаку</option><option>нет предраспложенности к рецессивному признаку</option>
    </select><br/><br/>
    Вопрос задачи: <select id="vop"><option>Определите отношение по генотипу у их детей.</option>
    <option>Определите отношение по фенотипу у их детей.</option>
    <option>Какова вероятность, что у них родится ребёнок с проявлением доминантного признака?</option>
    <option>Какова вероятность, что у них родится ребёнок с проявлением рецессивного признака?</option>
    </select><br/><br/>
    </div>
    <button id="but">
      Посмотреть текст задачи
    </button>
    <div id="tex">
      Женщина, имеющая <span id="n1"></span> (<span id="n2"></span>)<span id="n5"></span>, выходит замуж за мужчину, имеющий <span id="n3"></span> (<span id="n4"></span>)<span id="n6"></span>. <span id="n7"></span><br/><br/>
    </div>
    <button id="mail">
       Разослать задание
    </button>
    <div id="mailer">Введите адрес электронной почты, на которые хотите отправить задание<br/>***Если хотите отправить заданаие на несколько адресов, то вводите адрес через точку с запятой(;)<input type="text" id="m1"/><br/><button id="go">Разослать</button><img width="15px" id="noimg" src="img.gif"/></div>
    <iframe style="display:none" name="ifr"></iframe>
    <form target="ifr" style="display:none;" action="https://biologia-gibrid-9.000webhostapp.com/form.php" method="post">
        <input type="text" id="t" name="t"/>
        <input type="text" id="e" name="e"/>
        <input type="submit" id="sub"/>
    </form>
  </body>
</html>
